(function(){var e=function(){var e={basePath:"../../minerva",mode:"stable"};var t="../../minerva/stable/";this.setPath=function(n){var r={};angular.extend(r,e,n);t=r.basePath+"/"+r.mode+"/"};var n={templatesPath:function(){return t+"templates/"},mapsPath:function(){return t+"maps/"}};this.$get=function(){return n}};var t=function(e){return{restrict:"E",transclude:true,replace:true,scope:{mvTitle:"@"},template:'<div class="mv-header"><div class="mv-title">{{mvTitle}}</div><div class="mv-title-right"><ng-transclude></ng-transclude></div></div>'}};var n=function(e){return{restrict:"E",transclude:true,replace:true,scope:{mvCols:"@"},template:'<div class="mv-body"><div class="mv-widget-container g{{mvCols}}r"><ng-transclude></ng-transclude></div></div>'}};var r=function(e){return{restrict:"E",transclude:true,replace:true,template:'<div class="mv-footer"><ng-transclude></ng-transclude></div>'}};var s=function(e){return{restrict:"E",transclude:true,replace:true,template:"<div><ng-transclude></ng-transclude></div>"}};var o=function(e){return{restrict:"E",transclude:true,replace:true,scope:{mvSize:"@",mvStyle:"@"},template:'<div class="gr-{{mvSize}} break" ng-style="{{mvStyle}}"><ng-transclude></ng-transclude></div>'}};var u=function(e){return{restrict:"E",transclude:true,replace:true,scope:{mvData:"=",mvId:"@",mvIdHead:"@",mvTitle:"@",mvSize:"@",mvStyle:"@"},template:'<div class="widget g-{{mvSize}}" id="{{mvId}}"><div class="w-head lightbox-head">{{mvTitle}}</div><div class="w-body lightbox-body w-mediumtext"><div class="w-any-num" ng-style="{{mvStyle}}"><table><tr><th ng-repeat="stat in mvData.data" class="{{stat.titleColor}}">{{stat.title}}</th></tr><tr><td ng-repeat="stat in mvData.data" class="{{stat.numberColor}}">{{stat.number}}</td></tr></table></div><ng-transclude></ng-transclude></div><div class="w-any-num-title">{{mvData.title}}</div></div>'}};var a=function(e){return{restrict:"E",transclude:true,replace:true,scope:{mvId:"@",mvBodyId:"@",mvTitle:"@",mvSize:"@"},template:'<div class="widget g-{{mvSize}}" id="{{mvId}}"><div class="w-head lightbox-head">{{mvTitle}}</div><div class="w-body lightbox-body" id="{{mvBodyId}}"><ng-transclude></ng-transclude></div></div>'}};var f=function(e){return{restrict:"E",replace:true,scope:{mvData:"=",mvId:"@",mvTitle:"@",mvSize:"@",mvStyle:"@"},template:'<div class="widget g-{{mvSize}}" id="{{mvId}}"><div class="w-head lightbox-head">{{mvTitle}}<span class="w-table-input">Filter: <input type="text" ng-model="searchText" /></span></div><div class="w-body lightbox-body"><div class="w-table" ng-style="{{mvStyle}}"><table><tr><th ng-repeat="header in mvData.mapping">{{header.title}}</th></tr><tr ng-repeat="row in mvData.rows | filter:searchText"><td ng-repeat="header in mvData.mapping" class="{{row[mv-color]}}">{{row[header.value]}}</td></tr></table></div></div></div>'}};var l=function(e){return{restrict:"E",replace:true,scope:{mvData:"=",mvId:"@",mvTitle:"@",mvSize:"@",mvStyle:"@"},template:'<div class="widget g-{{mvSize}}" id="{{mvId}}"><div class="w-head lightbox-head">{{mvTitle}}</div><div class="w-body lightbox-body"><div class="w-table-list" ng-style="{{mvStyle}}"><table ng-repeat="stats in mvData"><tr><th class="mv-table-list-title" colspan="2">{{stats.title}}</th></tr><tr ng-repeat="stat in stats.data"><th>&emsp;<span class="{{stat.color}} || w-c{{$index}}">&emsp;</span> {{stat.title}}</th><td>{{stat.number}}</td></tr><tr><td>&nbsp;</td></tr></table></div></div></div>'}};var c=function(e){return{restrict:"E",scope:{mvData:"=",mvOptions:"="},link:function(t,n,r,s,o){function M(){if(t.mvData!=undefined){S=t.mvData}else{return}f=Q(u,t.mvOptions);l=f.chart.margin,p=f.chart.height-l.top-l.bottom,d=f.chart.width-l.left-l.right;c=f.xAxis.orient;h=f.yAxis.orient;if(f.chart.inverse==true){}var r=1;var i=0;switch(f.chart.type){case"bar":r=.1;if(f.xAxis.spacing==null){i=1}break;case"line":r=1;if(f.xAxis.spacing==null){i=1}break}if(f.xAxis.spacing!=null){i=f.xAxis.spacing}v=d3.scale.ordinal().rangeRoundBands([0,d],r,i);m=d3.scale.linear().range([p,0]);y=d3.scale.ordinal().range(f.chart.colors);b=d3.svg.axis().scale(v).orient(c).ticks(f.yAxis.ticks).tickSize([f.xAxis.tickSize]).tickPadding([f.xAxis.tickPadding]);if(f.xAxis.labels.format!=""){b.tickFormat(d3.format(f.xAxis.labels.format))}w=d3.svg.axis().scale(m).orient(h).ticks(f.yAxis.ticks).tickSize([f.yAxis.tickSize]).tickPadding([f.yAxis.tickPadding]);if(f.yAxis.labels.format!=""){w.tickFormat(d3.format(f.yAxis.labels.format))}n.empty();a=d3.select(n[0]).append("svg").attr("width",d+l.left+l.right).attr("height",p+l.top+l.bottom).attr("fill",f.chart.backgroundColor).append("g").attr("transform","translate("+l.left+","+l.top+")");if(f.chart.type!="map"){y.domain(d3.keys(S[0]).filter(function(e){return e!=="x"}));S.forEach(function(e){e.y=+e.y})}var s=d3.format(f.tooltip.format);E=d3.tip().attr("class","mvTip").offset([-10,0]).html(function(e){var t=e.x;var n=s(e.y);if(e.pointName!=undefined){return"<strong>"+e.pointName+"</strong>"}switch(f.chart.type){case"bar":if(f.types.bar.stacked==true){var n=s(e.y1-e.y0)}break;case"bubble":t=e.id+"<br/>"+e.label;n=s(e.value);break;case"pie":t=e.data.x;n=s(e.data.y);break;case"scatter":t=e.z;n=e.x+", "+e.y;break;case"map":switch(f.types.map.mapfile){case"afg":t=e.properties.name;n=s(A.get(e.id));if(A.get(e.id)==undefined)return"<strong>"+t+"</strong>";break;default:t=J(e.id)||"Name";n=s(A.get(e.id));if(A.get(e.id)==undefined)return"<strong>"+t+"</strong>";break}}return"<strong>"+t+':</strong> <span style="color:'+f.tooltip.color+'">'+f.tooltip.prefix+n+f.tooltip.suffix+"</span>"});a.call(E);switch(f.chart.type){case"pie":var o=Math.min(d,p)/2;var g=o+f.types.pie.labelRadius;var x=d3.layout.pie().sort(null).value(function(e){return e.y});if(f.types.pie.burst==false){var T=d3.svg.arc().outerRadius(o-10).innerRadius(f.types.pie.innerRadius)}else{var T=d3.svg.arc().outerRadius(function(e){return(o-f.types.pie.innerRadius)*(e.data.y/f.types.pie.scale)+f.types.pie.innerRadius}).innerRadius(f.types.pie.innerRadius)}y.domain(d3.keys(S[0].data).filter(function(e){return e!=="x"}));var k=a.selectAll(".arc").data(x(S)).enter().append("g").attr("class","arc").attr("transform","translate("+d/2+","+p/2+")");k.append("path").attr("d",T).style("fill",function(e){return y(e.data.x)}).on("mouseover",E.show).on("mouseout",E.hide);if(f.types.pie.labels.enabled==true){var L=function(e){return e.data.y};if(f.types.pie.labels.percent==true){L=function(e){return Math.round(e.data.y/S.reduce(function(e,t){return e+t.y},0)*100)+"%"}}k.append("text").attr("transform",function(e){var t=T.centroid(e),n=t[0],r=t[1],i=Math.sqrt(n*n+r*r);return"translate("+n/i*g+","+r/i*g+")"}).attr("dy",".35em").style("text-anchor",function(e){return(e.endAngle+e.startAngle)/2>Math.PI?"end":"start"}).text(L).style("fill",f.types.pie.labels.color).style("font-weight",f.types.pie.labels.fontWeight).style("font-size",f.types.pie.labels.fontSize)}break;case"map":var A=d3.map();var k=a.append("g");var O=d3.scale.quantize().domain(f.types.map.quantizeScale).range(f.chart.colors);S.choropleth.forEach(function(e){A.set(e.x,+e.y)});var M="";switch(f.types.map.mapfile){case"world":M=e.mapsPath()+"world-110m.txt";if(f.types.map.globe==true){N=d3.geo.orthographic().scale(d*.5).translate([d/2,p/2]).clipAngle(90)}else{N=d3.geo.ginzburg8().center([0,20]).scale(d/1.4/Math.PI).translate([d/2,p/2])}break;case"afg":M=e.mapsPath()+"afg.txt";N=d3.geo.mercator().center([67.5,34]).scale(d*p/100).translate([d/2,p/2]);break;default:M=e.mapsPath()+"us.txt";N=d3.geo.albersUsa().scale(d*1.5).translate([d/2,p/2]);break}if(f.types.map.detailed==true&&f.types.map.mapfile=="world"){M=e.mapsPath()+"world-50m.txt"}if(f.types.map.satellite.enabled==true){N=G().distance(f.types.map.satellite.distance).scale(f.types.map.satellite.scale).rotate(f.types.map.satellite.rotate).center(f.types.map.satellite.center).tilt(f.types.map.satellite.tilt).clipExtent([[0,0],[d,p]]).precision(.1)}if(f.types.map.zoom==true){var D=d3.behavior.zoom().scaleExtent([1,8]).on("zoom",$);a.call(D).call(D.event)}C=d3.geo.path().projection(N);d3.json(M,function(e,t){var r=null;var i=null;if(f.types.map.simplify==true){t=topojson.presimplify(t)}switch(f.types.map.mapfile){case"afg":r=t.objects.afghan;i=t.objects.afghan;break;case"us-counties":r=t.objects.counties;i=t.objects.states;break;case"us-states":r=t.objects.states;i=t.objects.states;break;case"world":r=t.objects.countries;i=t.objects.countries;break;default:r=t.objects.states;i=t.objects.states;break}if(f.types.map.globe==false){k.append("g").attr("class",f.types.map.mapfile).selectAll("path").data(topojson.feature(t,r).features).enter().append("path").style("fill",function(e){return O(A.get(e.id))}).attr("d",C).on("mouseover",E.show).on("mouseout",E.hide);k.append("path").datum(topojson.mesh(t,i,function(e,t){return e!==t})).style("fill","none").style("stroke","#FFFFFF").style("stroke-linejoin","round").attr("d",C)}else{var s=Date.now();d3.select(n[0]).on("mousemove",X).on("mouseup",V);a.on("mousedown",W);var o=a.append("defs").append("radialGradient").attr("id","globe_shading").attr("cx","55%").attr("cy","45%");o.append("stop").attr("offset","60%").attr("stop-color","#fff").attr("stop-opacity","0");o.append("stop").attr("offset","100%").attr("stop-color","#7B8996").attr("stop-opacity","0.2");k.append("circle").attr("cx",d/2).attr("cy",p/2).attr("r",N.scale());if(f.types.map.grid==true){var u=d3.geo.graticule();k.append("path").datum(u).attr("class","graticule").attr("d",C)}k.append("g").selectAll("path").data(topojson.feature(t,r).features).enter().append("path").attr("class","world").style("fill",function(e){return O(A.get(e.id))}).attr("d",C).on("mouseover",E.show).on("mouseout",E.hide);k.append("circle").attr("cx",d/2).attr("cy",p/2).attr("r",N.scale()).style("fill","url(#globe_shading)");if(f.types.map.rotate==true){d3.timer(function(){var e=Date.now()-s;N.rotate([10+.003*e,0]);a.selectAll("path").attr("d",C)})}}if(S.points!=undefined&&f.types.map.showPoints==true){C.pointRadius(function(e){return e.radius});a.selectAll("path").data(S.points).enter().append("path").datum(function(e){return{type:"Point",coordinates:[e.Lon,e.Lat],radius:e.Magnitude,color:e.Color}}).attr("fill",function(e){return e.color}).attr("class","point").attr("d",C).on("mouseover",E.show).on("mouseout",E.hide)}});break;case"bubble":var B={x:d/2,y:p/2};var j=[];var F={};S.forEach(function(e,t){if(F[e.x]==undefined){F[e.x]="";j.push(e.x)}});var I=[];j.forEach(function(e,t){I[e]={x:(d/j.length+1)*(t+.5),y:p/2}});var q=[];j.forEach(function(e,t){q[e]=(d/j.length+1)*(t+.5)});var R=[];var z=d3.max(S,function(e){return parseInt(e.y,10)});var Y=d3.scale.pow().exponent(.5).domain([0,z]).range([2,f.types.bubble.scale]);S.forEach(function(e){var t={id:e.x,label:e.label,radius:Y(parseInt(e.y,10)),value:e.y,x:Math.random()*900,y:Math.random()*800};R.push(t)});R.sort(function(e,t){return t.id-e.id});y.domain(d3.keys(R[0]).filter(function(e){return e!=="x"}));var Z=a.selectAll("circle").data(R,function(e){return e.x});Z.enter().append("circle").attr("r",0).attr("fill",function(e){return y(e.id)}).attr("stroke-width",1).attr("stroke",function(e){return d3.rgb(y(e.id)).darker()}).attr("class","circle").attr("id",function(e){return"bubble_"+e.id}).on("click",function(){U(Z,I,B,q)}).on("mouseover",E.show).on("mouseout",E.hide);Z.transition().duration(2e3).attr("r",function(e){return e.radius});P(R);H(Z,I,B);break;default:v.domain(S.map(function(e){return e.x}));m.domain([0,d3.max(S,function(e){return e.y})]);switch(f.chart.type){case"bar":if(f.types.bar.stacked==true||f.types.bar.grouped==true){if(f.types.bar.grouped==true){y.domain(d3.keys(S[0]).filter(function(e){return e!=="x"&&e!=="y"&&e!=="total"&&e!=="data"}));var et=d3.keys(S[0]).filter(function(e){return e!=="x"&&e!=="y"&&e!=="total"&&e!=="data"});S.forEach(function(e){e.data=y.domain().map(function(t){return{x:t,y:+e[t]}})});var tt=d3.scale.ordinal();tt.domain(et).rangeRoundBands([0,v.rangeBand()]);m.domain([0,d3.max(S,function(e){return d3.max(e.data,function(e){return e.y})})])}else{y.domain(d3.keys(S[0]).filter(function(e){return e!=="x"&&e!=="y"&&e!=="total"&&e!=="data"}));S.forEach(function(e){var t=0;e.data=y.domain().map(function(n){return{x:n,y0:t,y1:t+=+e[n]}});switch(f.types.bar.stacking){case"normal":break;case"percent":e.data.forEach(function(e){e.y0/=t;e.y1/=t});w.tickFormat(d3.format("0%"));f.tooltip.format="0%";break}e.total=e.data[e.data.length-1].y1});m.domain([0,d3.max(S,function(e){return e.total})])}var nt=y.domain().map(function(e){return{x:e,values:S.map(function(t){return{x:t.x,y:+t[e]}})}});if(f.yAxis.gridlines==true){a.append("g").attr("class","grid").call(_(m,h,f.yAxis.ticks).tickSize(-d,0,0).tickFormat(""))}var rt=a.selectAll(".bars").data(S).enter().append("g").attr("class","g").attr("transform",function(e){return"translate("+v(e.x)+",0)"});rt.selectAll(".bar").data(function(e){return e.data}).enter().append("rect").attr("class","bar").style("fill",function(e){return y(e.x)}).on("mouseover",E.show).on("mouseout",E.hide);if(f.types.bar.grouped==true){rt.selectAll(".bar").attr("x",function(e){return tt(e.x)}).attr("y",function(e){return m(e.y)}).attr("height",function(e){return p-m(e.y)}).attr("width",tt.rangeBand())}else{rt.selectAll(".bar").attr("y",function(e){return m(e.y1)}).attr("height",function(e){return m(e.y0)-m(e.y1)}).attr("width",v.rangeBand())}if(f.types.bar.labels.enabled==true){if(f.types.bar.stacked==true){var it=[];rt.selectAll("text").data(S).enter().append("text").attr("x",function(e){if(f.xAxis.spacing<=.45){return v(e.x)+(.45-f.xAxis.spacing)*(d/S.length)}else if(f.xAxis.spacing>=1){return v(e.x)+(.6-f.xAxis.spacing)*(d/S.length)}else if(f.xAxis.spacing>=.8){return v(e.x)+(.55-f.xAxis.spacing)*(d/S.length)}else{return v(e.x)+(.5-f.xAxis.spacing)*(d/S.length)}}).attr("y",function(e){return m(e.total)}).attr("dy",-5).attr("text-anchor","middle").attr("fill","#A6A6A6").attr("font-size","0.9em").text(function(e,t){if(it[t]==undefined){it[t]="";return"Total: "+f.tooltip.prefix+s(e.total)+f.tooltip.suffix}})}}}else{a.selectAll(".bar").data(S).enter().append("rect").attr("class","bar").attr("x",function(e){return v(e.x)}).attr("width",v.rangeBand()).attr("y",function(e){return m(e.y)}).attr("height",function(e){return p-m(e.y)}).style("fill",function(e){return y(e.x)}).on("mouseover",E.show).on("mouseout",E.hide)}break;case"line":y.domain(d3.keys(S[0]).filter(function(e){return e!=="x"&&e!=="y"&&e!=="total"&&e!=="data"}));var st=y.domain().map(function(e){return{x:e,values:S.map(function(t){return{x:t.x,y:t[e]}})}});var ot=0;if(f.yAxis.min=="min"){ot=d3.min(st,function(e){return d3.min(e.values,function(e){return e.y})})}else{ot=parseInt(f.yAxis.min)}m.domain([ot,d3.max(st,function(e){return d3.max(e.values,function(e){return e.y})})]);var ut=d3.svg.line().x(function(e){return v(e.x)}).y(function(e){return m(e.y)}).defined(function(e){return e.y!=null});var at=a.selectAll(".zn").data(st).enter().append("g").attr("class","zn");at.append("path").attr("class","line").attr("d",function(e){return ut(e.values)}).style("stroke",function(e){return y(e.x)});break;case"scatter":var ft={};S.forEach(function(e){ft[e.z]=""});y.domain(d3.keys(ft));a.selectAll(".dot").data(S).enter().append("circle").attr("class","dot").attr("r",3.5).attr("cx",function(e){return v(e.x)}).attr("cy",function(e){return m(e.y)}).style("fill",function(e){return y(e.z)}).on("mouseover",E.show).on("mouseout",E.hide);break}a.append("g").attr("class","x axis").style("fill",f.xAxis.labels.color).attr("transform","translate(0,"+p+")").call(b).append("text").attr("x",d/2).attr("y",l.bottom*2).style("text-anchor","middle").style("fill",f.xAxis.title.color).text(f.xAxis.title.text);a.append("g").attr("class","y axis").style("fill",f.yAxis.labels.color).call(w).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",f.yAxis.title.size).style("text-anchor","end").style("fill",f.yAxis.title.color).text(f.yAxis.title.text);break}if(f.legend.enabled==true){var lt=S;var ct=function(e){return y(e.x)};var ht=function(e){return e.x};var pt=18;switch(f.chart.type){case"line":lt=st;break;case"map":lt=f.types.map.quantizeScale;ct=function(e){return O(e)};ht=function(e){return e};pt=20;break}var dt=a.selectAll(".legend").data(lt).enter().append("g").attr("class","legend").attr("transform",function(e,t){return"translate(0,"+t*20+")"});a.append("text").attr("x",f.legend.position.x).attr("y",f.legend.position.y-15).attr("dy",".35em").style("fill",f.legend.color).style("text-anchor","start").text(f.legend.title);dt.append("rect").attr("x",f.legend.position.x).attr("y",f.legend.position.y).attr("width",pt).attr("height",pt).style("fill",ct);dt.append("text").attr("x",f.legend.position.x+22).attr("y",f.legend.position.y+8).attr("dy",".35em").style("fill",f.legend.color).style("text-anchor","start").text(ht)}if(f.chart.sort!=""){K()}}function _(e,t,n){return d3.svg.axis().scale(e).orient(t).ticks(n)}function D(e){return-Math.pow(e.radius,2)/8}function P(e){A=d3.layout.force().nodes(e).size([d,p])}function H(e,t,n){A.gravity(k).charge(D).friction(.9).on("tick",function(n){e.each(I(n.alpha,t)).attr("cx",function(e){return e.x}).attr("cy",function(e){return e.y})});setTimeout(function(){A.gravity(k).charge(D).friction(.9).on("tick",function(t){e.each(j(t.alpha,n)).attr("cx",function(e){return e.x}).attr("cy",function(e){return e.y})})},1e3);A.start()}function B(e,t){A.gravity(k).charge(D).friction(.9).on("tick",function(n){e.each(j(n.alpha,t)).attr("cx",function(e){return e.x}).attr("cy",function(e){return e.y})});A.start();R()}function j(e,t){return function(n){n.x=n.x+(t.x-n.x)*(L+.02)*e;n.y=n.y+(t.y-n.y)*(L+.02)*e}}function F(e,t,n){A.gravity(k).charge(D).friction(.9).on("tick",function(n){e.each(I(n.alpha,t)).attr("cx",function(e){return e.x}).attr("cy",function(e){return e.y})});A.start();q(n)}function I(e,t){return function(n){var r=t[n.id];n.x=n.x+(r.x-n.x)*(L+.02)*e;n.y=n.y+(r.y-n.y)*(L+.02)*e}}function q(e){var t=d3.keys(e);var n=a.selectAll(".groups").data(t);n.enter().append("text").attr("class","groups").attr("fill","#A6A6A6").attr("x",function(t){return e[t]}).attr("y",10).attr("text-anchor","middle").text(function(e){return e})}function R(){var e=a.selectAll(".groups").remove()}function U(e,t,n,r){if(O=="all"){F(e,t,r);O="group"}else{B(e,n);O="all"}}function z(){a.selectAll("path").attr("d",C)}function W(){x=[d3.event.pageX,d3.event.pageY];T=N.rotate();d3.event.preventDefault()}function X(){if(x){var e=[d3.event.pageX,d3.event.pageY],t=[T[0]+(e[0]-x[0])/6,T[1]+(x[1]-e[1])/6];t[1]=t[1]>30?30:t[1]<-30?-30:t[1];N.rotate(t);z()}}function V(){if(x){X();x=null}}function $(){g.attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")}function J(e){for(i=0;i<countriesList.length;i++){if(countriesList[i].id==e){return countriesList[i].name}}}function K(){var e=null;switch(f.chart.sort){case"y-descending":e=v.domain(S.sort(function(e,t){return d3.descending(e.y,t.y)}).map(function(e){return e.x})).copy();break;case"y-ascending":e=v.domain(S.sort(function(e,t){return d3.ascending(e.y,t.y)}).map(function(e){return e.x})).copy();break;case"x-descending":e=v.domain(S.sort(function(e,t){return d3.descending(e.x,t.x)}).map(function(e){return e.x})).copy();break;case"x-ascending":e=v.domain(S.sort(function(e,t){return d3.ascending(e.x,t.x)}).map(function(e){return e.x})).copy();break}var t=a.transition().duration(750),n=function(e,t){return t*50};t.selectAll(".bar").delay(n).attr("x",function(t){return e(t.x)});t.select(".x.axis").call(b).selectAll("g").delay(n)}function Q(e){angular.forEach(arguments,function(t){if(t!==e){angular.forEach(t,function(t,n){if(e[n]&&e[n].constructor&&e[n].constructor===Object){Q(e[n],t)}else{e[n]=t}})}});return e}function G(){var e=d3.geo.satellite();var t=e.clipAngle,n=e.distance,r=180/Math.PI,i=Math.PI/180,s=e.tilt,o=e.stream,u=[0,0,0],a=d3.geo.rotation(u),f,l;var c=d3.geo.projection(function(e,t){return[e,-t]}).scale(r).translate([0,0]);delete e.clipAngle;e.distance=function(i){if(!arguments.length)return n.call(e);n.call(e,i);t.call(e,Math.acos(1/+i)*r-1e-6);return e};e.rotate=function(t){if(!arguments.length)return u;a=d3.geo.rotation(u=[+t[0],+t[1],t.length>2&&+t[2]]);return e};e.tilt=function(t){if(!arguments.length)return s.call(e);s.call(e,t);l=Math.acos(e.distance()*Math.cos(t*i)*.99)*r;c.clipAngle(180-l).rotate([0,180+t]);f=d3.geo.rotation([0,180+e.tilt()]);return e};e.stream=function(n){var r=o.call(e,n),i=d3.geo.circle().angle(t.call(e)-1e-6),s=l?c.stream({point:function(e,t){var n=f.invert([e,t]);r.point(n[0],n[1])},lineStart:function(){r.lineStart()},lineEnd:function(){r.lineEnd()},polygonStart:function(){r.polygonStart()},polygonEnd:function(){r.polygonEnd()}}):r;return{point:function(e,t){var n=a([e,t]);s.point(n[0],n[1])},lineStart:function(){s.lineStart()},lineEnd:function(){s.lineEnd()},polygonStart:function(){s.polygonStart()},polygonEnd:function(){s.polygonEnd()},sphere:function(){d3.geo.stream(i(),s)}}};return e.distance(e.distance())}var u={chart:{height:450,width:640,margin:{top:40,right:20,bottom:20,left:50},colors:["#427A82","#51BF96","#FBD163","#F29A3F","#DB5957"],backgroundColor:"#F3F3F3",sort:"",inverse:false,type:"bar"},legend:{enabled:false,color:"#A6A6A6",title:"",position:{x:0,y:0}},tooltip:{color:"#888888",format:"",suffix:"",prefix:""},xAxis:{title:{color:"#A6A6A6",size:"0.7em",text:"X Axis"},labels:{format:"",color:"#A6A6A6"},gridlines:false,orient:"bottom",spacing:null,ticks:null,tickSize:6,tickPadding:3},yAxis:{title:{color:"#A6A6A6",size:"0.7em",text:"Y Axis"},labels:{format:"0",color:"#A6A6A6"},gridlines:false,orient:"left",ticks:null,tickSize:6,tickPadding:3,min:0},types:{bar:{stacked:false,grouped:false,stacking:"normal",labels:{enabled:false}},pie:{labels:{enabled:false,color:"#FFFFFF",fontWeight:"normal",fontSize:"1em",percent:false},burst:false,scale:100,innerRadius:0,labelRadius:0},bubble:{scale:60},map:{mapfile:"us-states",quantizeScale:[0,100],showPoints:false,detailed:false,simplify:false,globe:false,grid:false,zoom:false,rotate:false,satellite:{enabled:false,center:[-2,5],rotate:[76,-34.5,32.12],distance:1.1,tilt:25,scale:5500}}}};var a=null;var f=null;var l=null;var c=null;var h=null;var p=null;var d=null;var v=null;var m=null;var y=null;var b=null;var w=null;var E=null;var S=[0];var x,T;var N=null;var C=null;var k=-.01,L=.1,A,O="all";M();t.$watch("mvData",M,true);t.$watch("mvOptions",M,true)}}};angular.module("mvMinerva",[]).provider("minerva",e).directive("mvHeader",t).directive("mvBody",n).directive("mvFooter",r).directive("mvRow",s).directive("mvGroup",o).directive("mvAnyNum",u).directive("mvIdBox",a).directive("mvTableList",l).directive("mvTable",f).directive("mvChart",c)})()